Робот выгрузки кода SQL Server в репозиторий GIT

Написан на языке python. 
Для своей работы требует установки среды GIT и конфигурации ключевой пары SSH с добавлением отпечатка в личный кабинет пользователя Azure DevOps от имени которого будет производится коммит.
Использует следующие библиотеки:
1.	gitpython – используется для работы с GIT
2.	pyodbc – используется для работы с SQL Server
3.	smtplib – используется для работы с почтовом сервером

Описание работы

В файле config.py необходимо указать:
1.	Рабочую директорию, которая будет использоваться при обработке файлов
2.	Список баз к выгрузке
3.	Учетные данные для подключения к БД
4.	Адреса электронной почты, куда будут отправляться письма при сбое робота

Основной скрипт main.py содержит в себе три логических блока:
1.	Клонирование текущего состояния репозитория в рабочую директорию (используется для корректной работы GIT, создает конфигурацию в скрытой папке .git)
2.	Последовательная выгрузка кода с заменой всех файлов, удаленные на сервере БД элементы также удалятся из репозитория. 
3.	Отправка и фиксация полученного во втором пункте кода в GIT
Формирование кода производится путем получения информации из системных представлений и вывода встроенной функции OBJECT_DEFINITION (). 
Файлы раскладываются по каталогам в зависимости от типов объектов и имеют формат наименования [название схемы].[название объекта].sql

Структура выгружаемых файлов:

Server Security – каталог безопасности сервера
	Logins – имена входа сервера
		SQL – пользователи SQL сервера
		Windows – доменные пользователи 
	Roles – роли сервера
	Triggers – триггеры уровня сервера
Название БД – каталог данных базы
	Database triggers – триггеры уровня БД
	Functions – каталог функций базы
		Scalar-valued Functions – скалярные функции
		Table-valued Functions – табличные функции
	Security – каталог безопасности БД
		Roles – роли БД
		Users – пользователи БД
			SQL – пользователи SQL сервера
			Windows – доменные пользователи 
	Sequences – последовательности
	Service Broker – каталог объектов брокера
		Contracts – контракты
		Message types – типы сообщений
		Queues – очереди
		Services – сервисы 
		XML Schemas – коллекции XML схем 
	Stored Procedures – хранимые процедуры
	Tables – таблицы и их индексы
	Triggers – триггеры 
	Views – представления
	
Логический порядок действий робота:
1.	Создает в рабочем каталоге папку для хранения кода
2.	Подключается к GIT по SSH и клонирует имеющийся репозиторий в рабочий каталог (git clone)
3.	В цикле проходит по массиву со списком БД и выполняет действия:
	3.1.	Пересоздает каталог по имени базы со структурой
	3.2.	Последовательно выполняет запросы к БД для каждого типа объекта с сохранением полученного кода в файлы .sql
4.	Пересоздает каталог объектов уровня сервера и наполняет его подобно п. 3.1-3.2
5.	Просчитывает изменения с исходным репозиторием и выполняет фиксацию текущего состояния кода (git commit)

-- В случае возникновения исключения в работе скрипта направляет письмо на e-mail разработчика


